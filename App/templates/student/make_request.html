{% extends "layout.html" %}
{% block title %}Make Request - Service Hours Tracker{% endblock %}
{% block page %}Make Request{% endblock %}

{% block content %}
<div class="container" style="max-width: 1000px;">
  <div class="card">
    <div class="card-content">
      <!-- Header Section -->
      <div class="row" style="border-bottom: 2px solid var(--border-color); padding-bottom: 16px; margin-bottom: 24px;">
        <div class="col s8">
          <h4 style="color: #424242; margin: 0;">Submit Service Hours Request</h4>
          <p style="color: #9e9e9e; margin: 0;">Request Approval for Service Hours</p>
        </div>
        <div class="col s4 right-align">
          <a href="/student/main" class="btn waves-effect waves-light logout-btn" style="background-color: transparent !important; border: 2px solid var(--border-color);">
            <i class="material-icons left">arrow_back</i>
            Back to Menu
          </a>
        </div>
      </div>

      <!-- Display flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ category }}" style="margin-bottom: 24px;">
              {{ message }}
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <!-- Form Section -->
      <div style="max-width: 600px; margin: 0 auto;">
        <form method="POST" action="{{ url_for('student_page_views.make_request') }}">
          <!-- Service Field -->
          <div class="input-field" style="margin-bottom: 24px;">
            <input placeholder="Enter service type" id="service" name="service" type="text" class="validate" required>
            <label for="service">Service</label>
          </div>

          <!-- Date and Hours Row -->
          <div class="row" style="margin-bottom: 24px;">
            <div class="col s6">
              <div class="input-field">
                <input placeholder="Select date" id="date" name="date" type="date" class="validate" required>
                <label for="date" class="active">Date</label>
              </div>
            </div>
            <div class="col s6">
              <div class="input-field">
                <input placeholder="Enter hours" id="hours" name="hours" type="number" step="0.5" min="0" class="validate" required>
                <label for="hours" class="active">Hours</label>
              </div>
            </div>
          </div>

          <!-- Student ID Field -->
          <div class="input-field" style="margin-bottom: 24px;">
            <input placeholder="Enter student ID" id="student_id" name="student_id" type="text" class="validate" value="{{ student.student_id if student else '' }}" readonly required>
            <label for="student_id">Student ID</label>
          </div>

          <!-- Supervisor ID Field -->
          <div class="input-field" style="margin-bottom: 32px;">
            <input placeholder="Enter supervisor ID" id="supervisor_id" name="supervisor_id" type="text" class="validate" required>
            <label for="supervisor_id">Supervisor ID</label>
          </div>

          <!-- Action Buttons -->
          <div class="row">
            <div class="col s6">
              <button type="submit" class="btn waves-effect waves-light" style="width: 100%; background-color: var(--btn-bg); color: var(--btn-text);">
                <i class="material-icons left">send</i>
                Submit Request
              </button>
            </div>
            <div class="col s6">
              <a href="/student/main" class="btn waves-effect waves-light cancel-btn" style="width: 100%; background-color: #424242; color: #ffffff; border: 2px solid #424242;">
                <i class="material-icons left">cancel</i>
                Cancel
              </a>
            </div>
          </div>
        </form>
      </div>

      <!-- Quick Info Panel -->
      <div class="card-panel" style="border: 2px solid var(--border-color); margin-top: 32px;">
        <h5 style="color: var(--text-color); margin-bottom: 16px;">Request Guidelines</h5>
        <div class="row">
          <div class="col s6">
            <p style="color: var(--secondary-text); margin: 0; font-size: 14px;">
              <strong>Required Information:</strong>
            </p>
            <ul style="color: var(--secondary-text); margin: 8px 0; padding-left: 20px; font-size: 14px;">
              <li>Service type performed</li>
              <li>Date of service</li>
              <li>Hours completed</li>
              <li>Student and Supervisor IDs</li>
            </ul>
          </div>
          <div class="col s6">
            <p style="color: var(--secondary-text); margin: 0; font-size: 14px;">
              <strong>Processing Time:</strong>
            </p>
            <p style="color: var(--secondary-text); margin: 8px 0; font-size: 14px;">
              Requests are typically reviewed within 2-3 business days. You can check the status in your request history.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set today's date as default for the date field
    const dateInput = document.getElementById('date');
    if (dateInput && !dateInput.value) {
        const today = new Date().toISOString().split('T')[0];
        dateInput.value = today;
    }
    
    // Materialize form initialization
    M.updateTextFields();
});
</script>
{% endblock %}
