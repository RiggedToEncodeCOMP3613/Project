{% extends "layout.html" %}
{% block title %}Manage Accolades - Service Hours Tracker{% endblock %}
{% block page %}Accolades{% endblock %}

{% block content %}
<div class="container" style="max-width: 1200px;">
  <div class="card">
    <div class="card-content">
      <!-- Header with Back Button -->
      <div style="margin-bottom: 24px;">
        <a href="/staff/main" style="color: var(--secondary-text); text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
          <i class="material-icons" style="font-size: 18px;">arrow_back</i>
          Back to Main Menu
        </a>
      </div>

      <!-- Title and Action Buttons -->
      <div style="border-bottom: 2px solid var(--border-color); padding-bottom: 16px; margin-bottom: 24px; display: flex; align-items: center; justify-content: space-between;">
        <h4 style="color: var(--text-color); margin: 0;">Manage Accolades</h4>
        <div style="display: flex; gap: 12px;">
          <a href="/staff/award-accolade" class="btn waves-effect waves-light" style="background-color: var(--btn-bg); color: var(--btn-text); margin: 0;">
            <i class="material-icons left">emoji_events</i>
            Award Accolade
          </a>
          <a href="/staff/create-accolade" class="btn waves-effect waves-light" style="background-color: var(--btn-bg); color: var(--btn-text); margin: 0;">
            <i class="material-icons left">add</i>
            Create New Accolade
          </a>
        </div>
      </div>

      <!-- Accolades Table -->
      <div style="overflow-x: auto;">
        <table class="accolades-table" style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr class="accolades-header">
              <th>Accolade Name</th>
              <th>Total Students Awarded</th>
              <th>Personally Awarded</th>
              <th style="text-align: center;">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for accolade in accolades %}
            <tr class="{% if loop.index % 2 == 0 %}accolade-row-even{% else %}accolade-row-odd{% endif %}">
              <td>{{ accolade.description }}</td>
              <td>{{ accolade.total_count | default(0) }}</td>
              <td>{{ accolade.personal_count | default(0) }}</td>
              <td style="text-align: center;">
                <a href="/staff/edit-accolade/{{ accolade.id }}" class="accolade-edit-btn">
                  <i class="material-icons">edit</i>
                </a>
                <a href="#delete-modal-{{ accolade.id }}" class="modal-trigger accolade-delete-btn">
                  <i class="material-icons">delete</i>
                </a>
                
                <!-- Delete Modal -->
                <div id="delete-modal-{{ accolade.id }}" class="modal">
                  <div class="modal-content">
                    <h4>Delete Accolade?</h4>
                    <p>Are you sure you want to delete the <strong>{{ accolade.description }}</strong> accolade?</p>
                  </div>
                  <div class="modal-footer">
                    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
                    <form method="POST" action="/staff/delete-accolade/{{ accolade.id }}" style="display: inline;">
                      <button type="submit" class="waves-effect waves-red btn red">Delete</button>
                    </form>
                  </div>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Info Card -->
      <div class="card-panel accolade-info-panel" style="margin-top: 32px;">
        <h5 style="margin-bottom: 12px;">About Accolades</h5>
        <p style="margin: 0;">
          Accolades are special awards given to students for exceptional service or achievements. Unlike milestones, accolades are manually awarded by staff members based on qualitative assessment of student contributions. You can create custom accolades, edit existing ones, award them to students, or remove them from the system.
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Initialize Materialize Modals -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var modals = document.querySelectorAll('.modal');
    M.Modal.init(modals);
  });
</script>
{% endblock %}
