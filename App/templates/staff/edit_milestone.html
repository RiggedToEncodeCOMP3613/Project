{% extends "layout.html" %}
{% block title %}Edit Milestone - Service Hours Tracker{% endblock %}
{% block page %}Edit Milestone{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px;">
  <div class="card">
    <div class="card-content">
      <!-- Header with Back Button -->
      <div style="margin-bottom: 24px;">
        <a href="/staff/milestones" style="color: #9e9e9e; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
          <i class="material-icons" style="font-size: 18px;">arrow_back</i>
          Back to Milestones
        </a>
      </div>

      <!-- Title -->
      <h4 style="color: #424242; margin-bottom: 32px;">Edit Milestone</h4>

      <!-- Flash Messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="card-panel" style="background-color: {% if category == 'error' %}#ffebee{% else %}#e8f5e9{% endif %}; border-left: 4px solid {% if category == 'error' %}#ef5350{% else %}#4caf50{% endif %}; margin-bottom: 16px;">
              <span style="color: {% if category == 'error' %}#c62828{% else %}#2e7d32{% endif %};">{{ message }}</span>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <!-- Edit Milestone Form -->
      <form method="POST" action="/staff/edit-milestone/{{ milestone.id }}">
        <div style="margin-bottom: 24px;">
          <label style="display: block; color: #424242; font-weight: 500; margin-bottom: 8px;">
            Hours Required
          </label>
          <input 
            type="number" 
            name="hours" 
            required 
            min="1" 
            value="{{ milestone.hours }}" 
            placeholder="Enter number of hours" 
            style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; box-sizing: border-box; font-size: 16px; color: #424242;"
            onfocus="this.style.borderColor='#424242'"
            onblur="this.style.borderColor='#e0e0e0'"
          />
          <p style="color: #9e9e9e; margin: 8px 0 0; font-size: 14px;">
            Number of service hours required to achieve this milestone
          </p>
        </div>

        <!-- Action Buttons -->
        <div style="display: flex; gap: 16px; margin-top: 32px;">
          <button 
            type="submit" 
            style="flex: 1; padding: 12px 24px; background-color: #424242; color: #ffffff; border: none; cursor: pointer; font-size: 16px; font-weight: 500; transition: background-color 0.3s; border-radius: 4px;"
            onmouseover="this.style.backgroundColor='#212121'"
            onmouseout="this.style.backgroundColor='#424242'"
          >
            Update Milestone
          </button>
          <a 
            href="/staff/milestones" 
            style="flex: 1; padding: 12px 24px; background-color: #ffffff; color: #424242; border: 2px solid #424242; text-decoration: none; text-align: center; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.3s; border-radius: 4px; display: flex; align-items: center; justify-content: center;"
            onmouseover="this.style.backgroundColor='#f5f5f5'"
            onmouseout="this.style.backgroundColor='#ffffff'"
          >
            Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
